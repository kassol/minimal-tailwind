@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'JinghuaSong';
  src: url('/fonts/京華老宋体v3.0.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@layer base {
  html {
    font-family: 'KingHwa_OldSong', 'JinghuaSong', 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  }
  
  body {
    @apply bg-white text-black;
  }
  
  a {
    @apply text-wine-600 hover:text-wine-700 transition-colors;
  }
  
  code {
    @apply bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm font-mono;
  }
  
  pre {
    @apply bg-black text-gray-100 p-4 rounded-lg overflow-x-auto mb-4;
  }
  
  pre code {
    @apply bg-transparent text-gray-100 p-0;
  }
  
  blockquote {
    @apply border-l-4 border-wine-600 pl-4 italic text-gray-600 my-4;
  }
  
  /* 全局强制覆盖prose插件 */
  .prose * {
    font-weight: 400 !important;
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 bg-wine-600 text-white rounded-lg hover:bg-wine-700 transition-colors;
  }
  
  .btn-outline {
    @apply px-4 py-2 border border-wine-600 text-wine-600 rounded-lg hover:bg-wine-50 transition-colors;
  }
  
  .card {
    @apply bg-white rounded-lg border border-gray-200 hover:border-wine-600 transition-colors;
  }
  
  .content-auto {
    content-visibility: auto;
  }
  
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* TOC样式 - Wine色彩系统 */
  .toc-nav {
    @apply lg:w-64 lg:flex-shrink-0 lg:sticky lg:top-8 lg:self-start mb-8 lg:mb-0;
  }
  
  .toc-header {
    @apply flex items-center justify-between pb-3 border-b border-gray-200 mb-4;
  }
  
  .toc-title {
    @apply text-lg font-medium text-black;
  }
  
  .toc-toggle {
    @apply text-gray-600 hover:text-wine-600 p-1 rounded;
  }
  
  .toc-content {
    @apply lg:block;
  }
  
  /* TOC列表样式 */
  .toc-nav ul {
    @apply list-none p-0 m-0 space-y-1;
  }
  
  .toc-nav ul ul {
    @apply ml-4 mt-1 space-y-1;
  }
  
  .toc-nav li {
    @apply m-0;
  }
  
  .toc-nav a {
    @apply block py-1 px-2 text-sm text-gray-400 hover:text-wine-600 hover:bg-wine-50 rounded transition-all duration-200 no-underline;
  }
  
  .toc-nav a.active {
    @apply text-wine-600 bg-wine-50 font-medium;
  }
  
  /* 移动端TOC折叠 */
  @media (max-width: 1023px) {
    .toc-nav {
      @apply bg-gray-50 border border-gray-200 rounded-lg p-4;
    }
    
    .toc-content {
      display: none;
    }
    
    .toc-content.show {
      display: block;
    }
  }
  
  /* 纸质照片风格 - 覆盖prose默认样式 */
  .prose img {
    background: white !important;
    padding: 12px !important;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.1) !important;
    transform: rotate(-0.5deg) !important;
    transition: transform 0.3s ease !important;
    cursor: pointer !important;
    
    /* 固定画框 - 4:3比例 */
    width: 100% !important;
    max-width: 600px !important;
    height: 400px !important;
    object-fit: cover !important;
    border-radius: 2px !important;
    margin: 20px auto !important;
    display: block !important;
  }
  
  .prose img:hover {
    transform: rotate(0deg) scale(1.02) !important;
    box-shadow: 0 8px 16px rgba(0,0,0,0.2) !important;
  }
  
  /* 响应式 */
  @media (max-width: 768px) {
    .prose img {
      height: 250px !important;
      max-width: 400px !important;
      padding: 8px !important;
    }
  }
}